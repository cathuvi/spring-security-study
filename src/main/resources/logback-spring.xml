<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <!-- ðŸŽ¯ ë¡œê·¸ íŒŒì¼ ê²½ë¡œ ë° ì´ë¦„ ì„¤ì • -->
    <property name="LOG_PATH" value="D:/study/security/spring-security-study.log"/>
    <property name="LOG_PATTERN" value="%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"/>

    <!-- ðŸ“º ì½˜ì†” ì¶œë ¥ ì„¤ì • (ê°œë°œ ì¤‘ ì‹¤ì‹œê°„ í™•ì¸ìš©) -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %highlight(%-5level) %cyan(%logger{36}) - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- ðŸ“„ íŒŒì¼ ì¶œë ¥ ì„¤ì • (ì˜êµ¬ ë³´ê´€ìš©) -->
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}</file>

        <!-- ðŸ“Š ë¡œê·¸ íšŒì „ ì •ì±… (íŒŒì¼ í¬ê¸° ì œí•œ) -->
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <!-- ë‚ ì§œë³„ ë°±ì—… íŒŒì¼ëª… íŒ¨í„´ -->
            <fileNamePattern>D:/study/security/backup/spring-security-study.%d{yyyy-MM-dd}.%i.log</fileNamePattern>

            <!-- íŒŒì¼ í¬ê¸° ì œí•œ (10MB) -->
            <maxFileSize>10MB</maxFileSize>

            <!-- ë°±ì—… íŒŒì¼ ë³´ê´€ ê¸°ê°„ (30ì¼) -->
            <maxHistory>30</maxHistory>

            <!-- ì „ì²´ ë¡œê·¸ íŒŒì¼ ìµœëŒ€ í¬ê¸° (1GB) -->
            <totalSizeCap>1GB</totalSizeCap>
        </rollingPolicy>

        <encoder>
            <pattern>${LOG_PATTERN}</pattern>
        </encoder>
    </appender>

    <!-- ðŸ” Spring Security ê´€ë ¨ ë¡œê·¸ -->
    <logger name="com.study.security" level="DEBUG" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </logger>

    <!-- ðŸ”‘ JWT ê´€ë ¨ ìƒì„¸ ë¡œê·¸ -->
    <logger name="com.study.security.jwt" level="DEBUG" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </logger>

    <!-- ðŸ‘¤ ì¸ì¦/ì¸ê°€ ê´€ë ¨ ë¡œê·¸ -->
    <logger name="com.study.security.service" level="DEBUG" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </logger>

    <!-- ðŸŒ ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œê·¸ -->
    <logger name="com.study.security.controller" level="DEBUG" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </logger>

    <!-- ðŸ›¡ï¸ Spring Security í”„ë ˆìž„ì›Œí¬ ë¡œê·¸ -->
    <logger name="org.springframework.security" level="DEBUG" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </logger>

    <!-- ðŸŒ¸ Spring ì›¹ ê´€ë ¨ ë¡œê·¸ -->
    <logger name="org.springframework.web" level="INFO" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </logger>

    <!-- ðŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ë¡œê·¸ -->
    <logger name="org.hibernate.SQL" level="DEBUG" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </logger>

    <!-- ðŸ” SQL íŒŒë¼ë¯¸í„° ë¡œê·¸ -->
    <logger name="org.hibernate.type.descriptor.sql.BasicBinder" level="TRACE" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </logger>

    <!-- ðŸ“¡ HTTP ìš”ì²­/ì‘ë‹µ ë¡œê·¸ (Spring Boot Actuator) -->
    <logger name="org.springframework.web.filter.CommonsRequestLoggingFilter" level="DEBUG" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </logger>

    <!-- ðŸš¨ ROOT ë¡œê±° (ê¸°ë³¸ ì„¤ì •) -->
    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </root>

    <!-- ðŸ“Š í”„ë¡œí•„ë³„ ì„¤ì • -->
    <springProfile name="dev">
        <!-- ê°œë°œ í™˜ê²½: ìƒì„¸í•œ ë¡œê·¸ -->
        <logger name="com.study.security" level="DEBUG"/>
        <logger name="org.springframework.security" level="DEBUG"/>
        <root level="DEBUG"/>
    </springProfile>

    <springProfile name="prod">
        <!-- ìš´ì˜ í™˜ê²½: í•„ìš”í•œ ë¡œê·¸ë§Œ -->
        <logger name="com.study.security" level="INFO"/>
        <logger name="org.springframework.security" level="WARN"/>
        <root level="WARN"/>
    </springProfile>

    <springProfile name="test">
        <!-- í…ŒìŠ¤íŠ¸ í™˜ê²½: ìµœì†Œí•œì˜ ë¡œê·¸ -->
        <logger name="com.study.security" level="INFO"/>
        <root level="WARN"/>
    </springProfile>

</configuration>